An interesting graph problem today! Exploring paths, with revisitation of certain nodes allowed, which makes this more complex. I believe the most important thing to notice for performance is that, if we want to find all paths from a particular node to the end, we can check against previous paths that visited the same nodes, and how many ways to the end they found from the current position. This is relevant, because paths that are simply permutations of the same nodes do occur a lot! Beyond this measure, there are additional things to consider, such as that the revisitable nodes can be transformed into connections between single-visit nodes, however, I did not include this optmization in my solution, nor the pruning of dead ends.